# ğŸš€ NYU LIMS Deployment Guide (Render + SQLite)

## ğŸ“‹ Overview

This guide will help you deploy your NYU LIMS system to Render using SQLite for a completely free deployment.

## ğŸ¯ What Gets Deployed

- **Backend**: FastAPI application with SQLite database
- **Frontend**: React application
- **Database**: SQLite (free forever, no monthly cost)

## ğŸ“ Required Files

Make sure you have these files in your repository:

### Backend Files
- `backend/render.yaml` - Render configuration
- `backend/requirements.txt` - Python dependencies
- `backend/app/` - Your FastAPI application
- `backend/insert_sample_products.py` - Data population script

### Frontend Files
- `frontend/package.json` - Node.js dependencies
- `frontend/vite.config.ts` - Vite configuration
- `frontend/src/` - Your React application

## ğŸš€ Deployment Steps

### Step 1: Prepare Your Repository

1. **Push your code to GitHub**:
   ```bash
   git add .
   git commit -m "Prepare for Render deployment"
   git push origin main
   ```

2. **Ensure your repository structure**:
   ```
   nyu-lims/
   â”œâ”€â”€ backend/
   â”‚   â”œâ”€â”€ render.yaml
   â”‚   â”œâ”€â”€ requirements.txt
   â”‚   â”œâ”€â”€ app/
   â”‚   â””â”€â”€ insert_sample_products.py
   â””â”€â”€ frontend/
       â”œâ”€â”€ package.json
       â”œâ”€â”€ vite.config.ts
       â””â”€â”€ src/
   ```

### Step 2: Deploy to Render

1. **Go to [Render.com](https://render.com)** and sign up/login

2. **Create a new Blueprint**:
   - Click "New +" â†’ "Blueprint"
   - Connect your GitHub repository
   - Select your repository

3. **Render will automatically detect** the `render.yaml` file and create both services

4. **Wait for deployment** (usually 5-10 minutes)

### Step 3: Get Your URLs

After deployment, you'll get:
- **Backend URL**: `https://nyu-lims-backend.onrender.com`
- **Frontend URL**: `https://nyu-lims-frontend.onrender.com`

### Step 4: Populate Your Database

1. **Access your backend** via SSH or Render shell
2. **Run the data population script**:
   ```bash
   cd backend
   python3 insert_sample_products.py --insert
   ```

## ğŸ”§ Configuration

### Environment Variables (Auto-configured)
- `USE_SQLITE=true` - Uses SQLite instead of PostgreSQL
- `SECRET_KEY` - Auto-generated by Render
- `ALGORITHM=HS256` - JWT algorithm
- `ACCESS_TOKEN_EXPIRE_MINUTES=720` - Token expiration

### Frontend Configuration
The frontend automatically connects to your backend API.

## ğŸ“Š What Happens When Users Visit

### First Time (Empty Database)
- **No products shown** initially
- **Users can add products** through the interface
- **Data persists** for all future visits

### After Products Added
- **All products displayed** immediately
- **Real-time updates** when others add products
- **No data loss** between sessions

## ğŸ’° Cost

**Completely Free Forever:**
- âœ… Backend: $0/month
- âœ… Frontend: $0/month  
- âœ… SQLite Database: $0/month
- âœ… **Total: $0/month**

## ğŸ”„ Data Persistence

- **SQLite database** persists all data
- **No data loss** when services restart
- **All users see the same data**
- **Real-time updates** across all users

## ğŸ› ï¸ Troubleshooting

### Common Issues

1. **Build fails**:
   - Check `requirements.txt` has all dependencies
   - Ensure `package.json` has correct scripts

2. **Database connection fails**:
   - Verify `USE_SQLITE=true` is set
   - Check database file permissions

3. **Frontend can't connect to backend**:
   - Verify the API URL in `render.yaml`
   - Check CORS settings in backend

### Useful Commands

```bash
# View backend logs
# (In Render dashboard)

# Access backend shell
# (In Render dashboard â†’ Shell)

# Check database
sqlite3 nyu_lims.db "SELECT COUNT(*) FROM products;"
```

## ğŸ”’ Security Notes

- **HTTPS enabled** automatically by Render
- **Environment variables** are secure
- **SQLite file** is protected
- **No sensitive data** in code

## ğŸ“ˆ Scaling (If Needed)

If you need more users or features later:
1. **Upgrade to PostgreSQL** ($7/month)
2. **Add more resources** to backend
3. **Implement caching** for better performance

## ğŸ‰ Success!

Once deployed, your lab members can:
- **Access the LIMS** at your frontend URL
- **Add/edit products** in real-time
- **See all lab data** in one place
- **Use it from anywhere** with internet access

---

**Need help?** Check Render's documentation or contact their support!
